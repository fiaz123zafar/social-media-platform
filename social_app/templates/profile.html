{% extends 'base.html' %}

{% block content %}
<div class="card">
    <div style="text-align: center;">
        {% if profile.profile_picture %}
            <img src="{{ profile.profile_picture.url }}" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover;">
        {% else %}
            <div style="width: 150px; height: 150px; border-radius: 50%; background: #667eea; margin: 0 auto; display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem;">
                {{ user_profile.username.0|upper }}
            </div>
        {% endif %}
        
        <h2 style="margin-top: 1rem;">{{ user_profile.username }}</h2>
        
        {% if profile.bio %}
            <p style="color: #666; margin-top: 0.5rem;">{{ profile.bio }}</p>
        {% endif %}
        
        <div style="display: flex; justify-content: center; gap: 2rem; margin-top: 1rem;">
            <div>
                <strong>{{ profile.followers_count }}</strong>
                <small style="display: block; color: #777;">Followers</small>
            </div>
            <div>
                <strong>{{ profile.following_count }}</strong>
                <small style="display: block; color: #777;">Following</small>
            </div>
            <div>
                <strong>{{ posts.count }}</strong>
                <small style="display: block; color: #777;">Posts</small>
            </div>
        </div>
        
        <div style="margin-top: 1.5rem;">
            {% if user == user_profile %}
                <a href="{% url 'edit_profile' %}" class="btn btn-primary">Edit Profile</a>
            {% else %}
                <a href="{% url 'follow_user' user_profile.username %}" class="btn btn-primary">
                    {% if is_following %}Unfollow{% else %}Follow{% endif %}
                </a>
            {% endif %}
        </div>
    </div>
</div>

<h2 style="color: white; margin: 2rem 0 1rem;">Posts</h2>

{% for post in posts %}
<div class="card">
    <p>{{ post.content }}</p>
    {% if post.image %}
        <img src="{{ post.image.url }}" style="width: 100%; border-radius: 8px; margin-top: 1rem;">
    {% endif %}
    <small style="color: #777; display: block; margin-top: 0.5rem;">{{ post.created_at|date:"M d, Y" }}</small>
</div>
{% empty %}
<div class="card">
    <p>No posts yet.</p>
</div>
{% endfor %}
{% endblock %}